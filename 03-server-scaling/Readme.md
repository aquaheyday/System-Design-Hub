# server scaling

## 수직적 규모 확장 과 수평적 규모 확장

수직적 규모 확장
수직적 규모 확장(vertical scaling)은 스케일 업(scale up)이라고도 한다.
프로세스는 서버에 고사양 자원(더 좋은 cpu, 더 많은 ram 등)을 추가하는 행위를 말한다.

수평적 규모 확장
스케일 아웃(scale out) 이라고도 한다.
프로세스는 더 많은 서버를 추가하여 서능을 개선하는 행위를 말한다.

서버로 유입되는 트래픽의 양이 적을 때는 수직적 확장이 좋은 선택이며, 이 방법의 가장 큰 장점은 단순함이다. 그러나 이 방법에는 몇 가지 심각한 단점이 존재한다.

- 수직적 규모 확장에는 한계가 있다. 한 대의 서버에 cpu나 메모리를 무한대로 증설할 방법은 없다.
- 수직적 규모 확장법은 장애에 대한 자동복구(failover) 바ㅇ안이나 다중와(re-dundancy) 방안을 제시하지 않는다. 서버에 장애가 발생하면 서비스는 완전히 중단된다.

이런 단점 때문에, 대규모 애플리케이션에는 수평적 규모 확장법이 보다 적절하다.

## 로드밸런서

로드밸런서는 부하 분산 집합에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할을 합니다. 

![Image](https://github.com/user-attachments/assets/1e64a49d-38a2-44bd-acb5-049110b74077)

사용자는 로드밸런서의 공개 IP 주소로 접속한다.
서버간 통신에는 사설 IP 주소가 이용된다. 사설 IP 주소는 같은 네트워크에 속한 서버 사이의 통신에만 쓰일 수 있으며, 인터넷을 통해서는 접속할 수 없다.

서버 1이 다운되면 모든 트래픽은 서버 2로 전송된다. 따라서 서비스가 중지되는 일을 방지한다.
웹 서버 계층에 더 많은 서버를 추가하기만하면 로드밸런스가 자동적으로 트래픽을 분산한다.

## 데이터베이스 다중화

보통 서버 사이에 주(master)-부(slave) 관계를 설정하고 데이터 원본은 주 서버에 사본은 부 서버에 저장하는 방식이다. 
쓰기 연산(write operaion)은 마스터에서만 지원한다. 부 데이터베이스는 주 데이터베이스로부터 그 사본을 전달받아 읽기 연산(read operation)만을 지원한다. 
데이터베이스르 변견하는 명령어들(insert, delete, update) 등은 주 데이터베이스로만 전달되어야한다. 
대부분의 경우 읽기 연산의 비중이 쓰기 연산보다 훨씬 높다. 따라서 통상 부 데이터베이스 수가 주 데이터베이스 수 보다 많다. 

장점 
- 병렬로 처리될 질의(query)의 수가 늘어나므로 성능이 좋아진다.
- 데이터를 지역적으로 떨어진 여러 장소에 다중화시켜 놓을 수 있기 때문에 자연 재해로 부터 안정성을 확보할 수 있다.
- 하나의 데이터베이스 서버에 장애가 발생하더라도 다른 서버에 있는 데이터를 가져와 계속 서비스가 가능하다.

## 캐시

캐시는 연산 결과 또는 자주 참조되는 데이터를 메모리에 두고 다음 요청이 보다 빠르게 처리될 수 있도록하는 저장소이다. 
애플리케이션의 성능은 데이터베이스를 얼마나 자주 호출하느냐에 크게 좌우되는데 캐시를 사용하면 해당 문제를 완화할 수 있다.

캐시계층은 데이터가 잠시 보관되는 곳으로 데이터베이스보다 속도가 빠르다. 별도의 캐시 계층을 운용하면 성능이 개선될 뿐 아니라 데이터베이스의 부하를 줄일 수 있고 캐시 계층의 규모를 독립적으로 확장하는것도 가능해진다.
